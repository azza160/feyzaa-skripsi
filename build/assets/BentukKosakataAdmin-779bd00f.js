import{j as a}from"./app-57e7bed0.js";import{X as na,r as n,S as ta,A as D}from"./vendor-a2d89f66.js";import{C as ra,a as oa,b as da,c as ca}from"./card-94e97b23.js";import{B as l}from"./button-b255e397.js";import{I as u}from"./input-77681c11.js";import{L as i}from"./label-acbb46eb.js";import{T as ma}from"./textarea-da492f64.js";import{S as q,a as G,b as X,c as J,d as B}from"./select-084f9a0f.js";import{T as ha,a as ua,b as K,c,d as ja,e as o}from"./table-f62baeff.js";import{D as L,a as P,b as M,c as _,d as Q,e as xa}from"./dialog-08090aed.js";import{A as pa}from"./AdminDashboardLayout-1ace00be.js";import{s as R}from"./index-1df17e58.js";import{P as ka}from"./plus-424d13ac.js";import{S as fa}from"./search-d440357c.js";import{P as U}from"./play-f8de0b3d.js";import{E as ga}from"./eye-8269d095.js";import{S as va}from"./square-pen-be699300.js";import{T as ba}from"./trash-2-ee5a2ec2.js";import{C as Na}from"./chevron-left-26830aa1.js";import{C as Ca}from"./chevron-right-d74b2ff6.js";import"./dropdown-menu-d0862b52.js";import"./avatar-7ff8c940.js";import"./check-95999c31.js";import"./createLucideIcon-256efdfd.js";import"./chevron-down-a36c0fa8.js";import"./index-007e7e0b.js";import"./x-49dde499.js";import"./house-ebc95582.js";import"./users-1490e3f6.js";import"./book-open-5cdb0389.js";import"./circle-help-c62c54b0.js";const ee=()=>{var O,$,Y;const{vocabularyForms:V=[],availableVocabularies:S=[]}=na().props,[m,W]=n.useState(""),[p,Z]=n.useState("0"),[j,x]=n.useState(1);n.useState(null),n.useState(!1);const aa=n.useRef(null),[k,f]=n.useState({open:!1,form:null}),[A,g]=n.useState({open:!1,form:null}),[t,z]=n.useState({open:!1,form:null}),[v,b]=n.useState({open:!1}),[s,F]=n.useState({bentuk:"",id_kosakata:"",kanji:"",furigana:"",romaji:"",arti:"",deskripsi:"",audio:""}),N=5,C=n.useMemo(()=>V.filter(e=>{const r=e.bentuk.toLowerCase().includes(m.toLowerCase())||e.kanji.toLowerCase().includes(m.toLowerCase())||e.furigana.toLowerCase().includes(m.toLowerCase())||e.romaji.toLowerCase().includes(m.toLowerCase())||e.arti.toLowerCase().includes(m.toLowerCase()),h=p==="0"||e.id_kosakata.toString()===p;return r&&h}),[V,m,p]),T=Math.ceil(C.length/N),y=(j-1)*N,E=C.slice(y,y+N),H=e=>{if(!e)return;new Audio(e).play().catch(h=>console.error("Gagal memutar audio:",h))},d=(e,r)=>{F(h=>({...h,[e]:r}))},w=()=>{F({bentuk:"",id_kosakata:"",kanji:"",furigana:"",romaji:"",arti:"",deskripsi:"",audio:""})},ea=()=>{if(!s.bentuk||!s.id_kosakata||!s.romaji||!s.arti){alert("Field wajib tidak boleh kosong!");return}D.post(R("admin.bentuk-kosakata.store"),s,{onSuccess:()=>{b({open:!1}),w()}})},sa=()=>{if(!s.bentuk||!s.romaji||!s.arti){alert("Field wajib tidak boleh kosong!");return}D.put(R("admin.bentuk-kosakata.update",A.form.id),s,{onSuccess:()=>{g({open:!1,form:null}),w()}})},ia=()=>{D.delete(R("admin.bentuk-kosakata.destroy",k.form.id),{onSuccess:()=>{f({open:!1,form:null})}})},la=e=>{F({bentuk:e.bentuk,id_kosakata:e.id_kosakata.toString(),kanji:e.kanji,furigana:e.furigana,romaji:e.romaji,arti:e.arti,deskripsi:e.deskripsi,audio:e.audio}),g({open:!0,form:e})},I=e=>{const r=S.find(h=>h.id.toString()===e.toString());return r?`${r.kanji} (${r.arti})`:`ID: ${e}`};return a.jsxs(pa,{currentPage:"vocabulary-forms",children:[a.jsx(ta,{title:"Bentuk Kosakata Admin"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bentuk Kosakata"}),a.jsxs(l,{onClick:()=>b({open:!0}),className:"flex items-center gap-2",children:[a.jsx(ka,{className:"h-4 w-4"}),"Tambah Bentuk"]})]}),a.jsxs(ra,{children:[a.jsx(oa,{children:a.jsx(da,{children:"Data Bentuk Kosakata"})}),a.jsxs(ca,{children:[a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(u,{placeholder:"Cari berdasarkan bentuk, kanji, furigana, romaji, atau arti...",value:m,onChange:e=>{W(e.target.value),x(1)},className:"pl-10"})]}),a.jsxs(q,{value:p,onValueChange:e=>{Z(e),x(1)},children:[a.jsx(G,{className:"w-full lg:w-48",children:a.jsx(X,{placeholder:"Filter Kosakata"})}),a.jsxs(J,{style:{maxHeight:300,overflowY:"auto"},children:[a.jsx(B,{value:"0",children:"Semua Kosakata"}),S.map(e=>a.jsxs(B,{value:e.id.toString(),children:[e.kanji," (",e.arti,")"]},e.id))]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(ha,{children:[a.jsx(ua,{children:a.jsxs(K,{children:[a.jsx(c,{children:"Bentuk"}),a.jsx(c,{children:"Kosakata"}),a.jsx(c,{children:"Kanji"}),a.jsx(c,{children:"Furigana"}),a.jsx(c,{children:"Romaji"}),a.jsx(c,{children:"Arti"}),a.jsx(c,{children:"Audio"}),a.jsx(c,{className:"text-center",children:"Action"})]})}),a.jsx(ja,{children:E.length>0?E.map(e=>a.jsxs(K,{children:[a.jsx(o,{children:a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.bentuk})}),a.jsx(o,{children:I(e.id_kosakata)}),a.jsx(o,{className:"font-medium",children:e.kanji}),a.jsx(o,{children:e.furigana}),a.jsx(o,{children:e.romaji}),a.jsx(o,{children:e.arti}),a.jsx(o,{children:a.jsx(l,{variant:"outline",size:"sm",onClick:()=>H(e.audio),className:"h-8 w-8 p-0",disabled:!e.audio,title:e.audio?"Putar Audio":"Audio tidak tersedia",children:a.jsx(U,{className:"h-4 w-4"})})}),a.jsx(o,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{variant:"outline",size:"sm",onClick:()=>z({open:!0,form:e}),className:"h-8 w-8 p-0",children:a.jsx(ga,{className:"h-4 w-4"})}),a.jsx(l,{variant:"outline",size:"sm",onClick:()=>la(e),className:"h-8 w-8 p-0",children:a.jsx(va,{className:"h-4 w-4"})}),a.jsx(l,{variant:"destructive",size:"sm",onClick:()=>f({open:!0,form:e}),className:"h-8 w-8 p-0",children:a.jsx(ba,{className:"h-4 w-4"})})]})})]},e.id)):a.jsx(K,{children:a.jsx(o,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Tidak ada data bentuk kosakata ditemukan"})})})]})}),T>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Menampilkan ",y+1," - ",Math.min(y+N,C.length)," ","dari ",C.length," data"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(l,{variant:"outline",size:"sm",onClick:()=>x(j-1),disabled:j===1,children:[a.jsx(Na,{className:"h-4 w-4"}),"Previous"]}),Array.from({length:T},(e,r)=>r+1).map(e=>a.jsx(l,{variant:j===e?"default":"outline",size:"sm",onClick:()=>x(e),className:"w-8 h-8 p-0",children:e},e)),a.jsxs(l,{variant:"outline",size:"sm",onClick:()=>x(j+1),disabled:j===T,children:["Next",a.jsx(Ca,{className:"h-4 w-4"})]})]})]})]})]}),a.jsx(L,{open:v.open||A.open,onOpenChange:e=>{e||(b({open:!1}),g({open:!1,form:null}),w())},children:a.jsxs(P,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsx(M,{children:a.jsx(_,{children:v.open?"Tambah Bentuk Kosakata":"Edit Bentuk Kosakata"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"bentuk",children:"Bentuk"}),a.jsx(u,{id:"bentuk",value:s.bentuk,onChange:e=>d("bentuk",e.target.value),placeholder:"masu form"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"id_kosakata",children:"Kosakata"}),a.jsxs(q,{value:s.id_kosakata,onValueChange:e=>d("id_kosakata",e),disabled:A.open,children:[a.jsx(G,{children:a.jsx(X,{placeholder:"Pilih kosakata"})}),a.jsx(J,{style:{maxHeight:300,overflowY:"auto"},children:S.map(e=>a.jsxs(B,{value:e.id.toString(),children:[e.kanji," (",e.arti,")"]},e.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"kanji",children:"Kanji"}),a.jsx(u,{id:"kanji",value:s.kanji,onChange:e=>d("kanji",e.target.value),placeholder:"学校に行きます"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"furigana",children:"Furigana"}),a.jsx(u,{id:"furigana",value:s.furigana,onChange:e=>d("furigana",e.target.value),placeholder:"がっこうにいきます"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"romaji",children:"Romaji"}),a.jsx(u,{id:"romaji",value:s.romaji,onChange:e=>d("romaji",e.target.value),placeholder:"gakkou ni ikimasu"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{htmlFor:"arti",children:"Arti"}),a.jsx(u,{id:"arti",value:s.arti,onChange:e=>d("arti",e.target.value),placeholder:"pergi ke sekolah"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(i,{htmlFor:"audio",children:"Audio URL"}),a.jsx(u,{id:"audio",value:s.audio,onChange:e=>d("audio",e.target.value),placeholder:"https://example.com/audio.mp3"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(i,{htmlFor:"deskripsi",children:"Deskripsi"}),a.jsx(ma,{id:"deskripsi",value:s.deskripsi,onChange:e=>d("deskripsi",e.target.value),placeholder:"Deskripsi bentuk kosakata..."})]})]}),a.jsxs(Q,{children:[a.jsx(l,{variant:"outline",onClick:()=>{b({open:!1}),g({open:!1,form:null}),w()},children:"Batal"}),a.jsx(l,{onClick:v.open?ea:sa,children:v.open?"Tambah":"Simpan"})]})]})}),a.jsx(L,{open:t.open,onOpenChange:e=>z({open:e,form:null}),children:a.jsxs(P,{className:"max-w-2xl",children:[a.jsx(M,{children:a.jsxs(_,{children:["Detail Bentuk Kosakata: ",(O=t.form)==null?void 0:O.bentuk]})}),t.form&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Bentuk:"}),a.jsx("p",{children:t.form.bentuk})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Kosakata:"}),a.jsx("p",{children:I(t.form.id_kosakata)})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Kanji:"}),a.jsx("p",{className:"text-lg",children:t.form.kanji})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Furigana:"}),a.jsx("p",{children:t.form.furigana})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Romaji:"}),a.jsx("p",{children:t.form.romaji})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Arti:"}),a.jsx("p",{children:t.form.arti})]})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Deskripsi:"}),a.jsx("p",{className:"mt-1 text-gray-700",children:t.form.deskripsi})]}),a.jsxs("div",{children:[a.jsx(i,{className:"font-semibold",children:"Audio:"}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsxs(l,{variant:"outline",size:"sm",onClick:()=>H(t.form.audio),children:[a.jsx(U,{className:"h-4 w-4 mr-2"}),"Play Audio"]})})]})]})]})}),a.jsx(L,{open:k.open,onOpenChange:e=>f({open:e,form:null}),children:a.jsxs(P,{children:[a.jsxs(M,{children:[a.jsx(_,{children:"Konfirmasi Hapus"}),a.jsxs(xa,{children:['Apakah Anda yakin ingin menghapus bentuk kosakata "',($=k.form)==null?void 0:$.bentuk,'" - "',(Y=k.form)==null?void 0:Y.kanji,'"? Tindakan ini tidak dapat dibatalkan.']})]}),a.jsxs(Q,{children:[a.jsx(l,{variant:"outline",onClick:()=>f({open:!1,form:null}),children:"Batal"}),a.jsx(l,{variant:"destructive",onClick:ia,children:"Hapus"})]})]})}),a.jsx("audio",{ref:aa})]})]})};export{ee as default};
