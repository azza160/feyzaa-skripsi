import{j as e}from"./app-57e7bed0.js";import{X as A,r as i,S as M,A as _}from"./vendor-a2d89f66.js";import{C as H,a as B,b as I,c as L}from"./card-94e97b23.js";import{B as r}from"./button-b255e397.js";import{I as z}from"./input-77681c11.js";import{S as E,a as O,b as R,c as U,d as S}from"./select-084f9a0f.js";import{T as V,a as X,b as g,c as n,d as F,e as s}from"./table-f62baeff.js";import{D as G,a as K,b as q,c as J,e as Q,d as W}from"./dialog-08090aed.js";import{A as Y}from"./AdminDashboardLayout-1ace00be.js";import{s as Z}from"./index-1df17e58.js";import{S as $}from"./search-d440357c.js";import{T as ee}from"./trash-2-ee5a2ec2.js";import{C as ae}from"./chevron-left-26830aa1.js";import{C as se}from"./chevron-right-d74b2ff6.js";import"./avatar-7ff8c940.js";import"./dropdown-menu-d0862b52.js";import"./check-95999c31.js";import"./createLucideIcon-256efdfd.js";import"./chevron-down-a36c0fa8.js";import"./index-007e7e0b.js";import"./x-49dde499.js";import"./house-ebc95582.js";import"./users-1490e3f6.js";import"./book-open-5cdb0389.js";import"./circle-help-c62c54b0.js";const De=()=>{var N;const{users:f}=A().props,[h,T]=i.useState(""),[p,y]=i.useState("newest"),[t,C]=i.useState(1),[o,c]=i.useState({open:!1,user:null}),d=3,m=i.useMemo(()=>{const a=f.filter(l=>l.nama_pengguna.toLowerCase().includes(h.toLowerCase()));return a.sort((l,P)=>{const b=new Date(l.created_at),w=new Date(P.created_at);return p==="newest"?w-b:b-w}),a},[f,h,p]),u=Math.ceil(m.length/d),x=(t-1)*d,v=m.slice(x,x+d),k=a=>{c({open:!0,user:a})},D=()=>{o.user&&_.delete(Z("admin.pengguna.destroy",o.user.id),{onSuccess:()=>{c({open:!1,user:null})}})},j=a=>{C(a)};return e.jsxs(Y,{currentPage:"users",children:[e.jsx(M,{title:"Manajemen Pengguna"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manajemen Pengguna"})}),e.jsxs(H,{children:[e.jsx(B,{children:e.jsx(I,{children:"Data Pengguna"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(z,{placeholder:"Cari berdasarkan nama pengguna...",value:h,onChange:a=>{T(a.target.value),C(1)},className:"pl-10"})]}),e.jsxs(E,{value:p,onValueChange:y,children:[e.jsx(O,{className:"w-full sm:w-48",children:e.jsx(R,{placeholder:"Urutkan"})}),e.jsxs(U,{children:[e.jsx(S,{value:"newest",children:"Terbaru"}),e.jsx(S,{value:"oldest",children:"Terlama"})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(V,{children:[e.jsx(X,{children:e.jsxs(g,{children:[e.jsx(n,{children:"Nama Pengguna"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Password"}),e.jsx(n,{children:"Google ID"}),e.jsx(n,{children:"EXP"}),e.jsx(n,{children:"Level"}),e.jsx(n,{className:"text-center",children:"Action"})]})}),e.jsx(F,{children:v.length>0?v.map(a=>e.jsxs(g,{children:[e.jsx(s,{className:"font-medium",children:a.nama_pengguna}),e.jsx(s,{children:a.email}),e.jsx(s,{children:a.password}),e.jsx(s,{children:a.google_id||"-"}),e.jsx(s,{children:a.exp}),e.jsx(s,{children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:a.level})}),e.jsx(s,{className:"text-center",children:e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>k(a),className:"h-8 w-8 p-0",children:e.jsx(ee,{className:"h-4 w-4"})})})]},a.id)):e.jsx(g,{children:e.jsx(s,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Tidak ada data pengguna ditemukan"})})})]})}),u>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Menampilkan ",x+1," - ",Math.min(x+d,m.length)," dari"," ",m.length," data"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>j(t-1),disabled:t===1,children:[e.jsx(ae,{className:"h-4 w-4"}),"Previous"]}),Array.from({length:u},(a,l)=>l+1).map(a=>e.jsx(r,{variant:t===a?"default":"outline",size:"sm",onClick:()=>j(a),className:"w-8 h-8 p-0",children:a},a)),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>j(t+1),disabled:t===u,children:["Next",e.jsx(se,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(G,{open:o.open,onOpenChange:a=>c({open:a,user:null}),children:e.jsxs(K,{children:[e.jsxs(q,{children:[e.jsx(J,{children:"Konfirmasi Hapus"}),e.jsxs(Q,{children:['Apakah Anda yakin ingin menghapus pengguna "',(N=o.user)==null?void 0:N.nama_pengguna,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(W,{children:[e.jsx(r,{variant:"outline",onClick:()=>c({open:!1,user:null}),children:"Batal"}),e.jsx(r,{variant:"destructive",onClick:D,children:"Hapus"})]})]})})]})]})};export{De as default};
