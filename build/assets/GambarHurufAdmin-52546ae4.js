import{j as e}from"./app-57e7bed0.js";import{X as se,r as l,S as re,A as T}from"./vendor-a2d89f66.js";import{C as ne,a as le,b as ie,c as te}from"./card-94e97b23.js";import{B as s}from"./button-b255e397.js";import{I as L}from"./input-77681c11.js";import{L as c}from"./label-acbb46eb.js";import{S as V,a as O,b as R,c as U,d as D}from"./select-084f9a0f.js";import{T as oe,a as ce,b as _,c as x,d as de,e as d}from"./table-f62baeff.js";import{D as M,a as P,b as A,c as E,d as $,e as ue}from"./dialog-08090aed.js";import{A as me}from"./AdminDashboardLayout-1ace00be.js";import{s as F}from"./index-1df17e58.js";import{P as he}from"./plus-424d13ac.js";import{S as xe}from"./search-d440357c.js";import{c as pe}from"./createLucideIcon-256efdfd.js";import{E as je}from"./eye-8269d095.js";import{S as fe}from"./square-pen-be699300.js";import{T as ge}from"./trash-2-ee5a2ec2.js";import{C as ve}from"./chevron-left-26830aa1.js";import{C as be}from"./chevron-right-d74b2ff6.js";import"./dropdown-menu-d0862b52.js";import"./avatar-7ff8c940.js";import"./check-95999c31.js";import"./chevron-down-a36c0fa8.js";import"./index-007e7e0b.js";import"./x-49dde499.js";import"./house-ebc95582.js";import"./users-1490e3f6.js";import"./book-open-5cdb0389.js";import"./circle-help-c62c54b0.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Y=pe("external-link",ke),Qe=()=>{const{images:G=[],availableLetters:u=[]}=se().props,[i,K]=l.useState(""),[p,X]=l.useState("0"),[t,m]=l.useState(1),[z,j]=l.useState({open:!1,image:null}),[C,f]=l.useState({open:!1,image:null}),[o,I]=l.useState({open:!1,image:null}),[g,v]=l.useState({open:!1}),[n,S]=l.useState({link:"",urutan:"",huruf_id:""}),b=5,k=l.useMemo(()=>G.filter(a=>{const r=u.find(ae=>ae.id.toString()===a.huruf_id.toString()),h=r&&(r.huruf.toLowerCase().includes(i.toLowerCase())||r.romaji.toLowerCase().includes(i.toLowerCase()))||a.link.toLowerCase().includes(i.toLowerCase()),ee=p==="0"||a.huruf_id.toString()===p;return h&&ee}),[G,i,p,u]),y=Math.ceil(k.length/b),N=(t-1)*b,B=k.slice(N,N+b),H=(a,r)=>{S(h=>({...h,[a]:r}))},w=()=>{S({link:"",urutan:"",huruf_id:""})},J=()=>{if(!n.link||!n.urutan||!n.huruf_id){alert("Semua field wajib diisi!");return}T.post(F("admin.gambar-huruf.store"),{...n,urutan:Number(n.urutan)},{onSuccess:()=>{v({open:!1}),w()}})},Q=()=>{T.put(F("admin.gambar-huruf.update",C.image.id),{link:n.link,urutan:Number(n.urutan)},{onSuccess:()=>{f({open:!1,image:null}),w()}})},W=()=>{T.delete(F("admin.gambar-huruf.destroy",z.image.id),{onSuccess:()=>{j({open:!1,image:null})}})},Z=a=>{S({link:a.link,urutan:a.urutan.toString(),huruf_id:a.huruf_id.toString()}),f({open:!0,image:a})},q=a=>{const r=u.find(h=>h.id.toString()===a.toString());return r?`${r.huruf} (${r.romaji})`:`ID: ${a}`};return e.jsxs(me,{currentPage:"letter-images",children:[e.jsx(re,{title:"Gambar Huruf Admin"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gambar Huruf"}),e.jsxs(s,{onClick:()=>v({open:!0}),className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Tambah Gambar"]})]}),e.jsxs(ne,{children:[e.jsx(le,{children:e.jsx(ie,{children:"Data Gambar Huruf"})}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(L,{placeholder:"Cari berdasarkan huruf atau link...",value:i,onChange:a=>{K(a.target.value),m(1)},className:"pl-10"})]}),e.jsxs(V,{value:p,onValueChange:a=>{X(a),m(1)},children:[e.jsx(O,{className:"w-full lg:w-48",children:e.jsx(R,{placeholder:"Filter Huruf"})}),e.jsxs(U,{portal:!0,style:{maxHeight:300,overflowY:"auto",background:"white"},children:[e.jsx(D,{value:"0",children:"Semua Huruf"}),u.map(a=>e.jsxs(D,{value:a.id.toString(),children:[a.huruf," (",a.romaji,")"]},a.id))]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(ce,{children:e.jsxs(_,{children:[e.jsx(x,{children:"Preview"}),e.jsx(x,{children:"Link"}),e.jsx(x,{children:"Urutan"}),e.jsx(x,{children:"Huruf"}),e.jsx(x,{className:"text-center",children:"Action"})]})}),e.jsx(de,{children:B.length>0?B.map(a=>e.jsxs(_,{children:[e.jsx(d,{children:e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx("img",{src:a.link,alt:"Preview",className:"w-12 h-12 object-cover rounded"})})}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate max-w-xs",title:a.link,children:a.link}),e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>window.open(a.link,"_blank"),className:"h-6 w-6 p-0",children:e.jsx(Y,{className:"h-3 w-3"})})]})}),e.jsx(d,{children:a.urutan}),e.jsx(d,{children:q(a.huruf_id)}),e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{variant:"outline",size:"sm",onClick:()=>I({open:!0,image:a}),className:"h-8 w-8 p-0",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(s,{variant:"outline",size:"sm",onClick:()=>Z(a),className:"h-8 w-8 p-0",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx(s,{variant:"destructive",size:"sm",onClick:()=>j({open:!0,image:a}),className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"h-4 w-4"})})]})})]},a.id)):e.jsx(_,{children:e.jsx(d,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Tidak ada data gambar huruf ditemukan"})})})]})}),y>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Menampilkan ",N+1," - ",Math.min(N+b,k.length)," dari"," ",k.length," data"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(s,{variant:"outline",size:"sm",onClick:()=>m(t-1),disabled:t===1,children:[e.jsx(ve,{className:"h-4 w-4"}),"Previous"]}),Array.from({length:y},(a,r)=>r+1).map(a=>e.jsx(s,{variant:t===a?"default":"outline",size:"sm",onClick:()=>m(a),className:"w-8 h-8 p-0",children:a},a)),e.jsxs(s,{variant:"outline",size:"sm",onClick:()=>m(t+1),disabled:t===y,children:["Next",e.jsx(be,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(M,{open:g.open||C.open,onOpenChange:a=>{a||(v({open:!1}),f({open:!1,image:null}),w())},children:e.jsxs(P,{className:"max-w-md",children:[e.jsx(A,{children:e.jsx(E,{children:g.open?"Tambah Gambar Huruf":"Edit Gambar Huruf"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"link",children:"Link Gambar"}),e.jsx(L,{id:"link",value:n.link,onChange:a=>H("link",a.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"urutan",children:"Urutan"}),e.jsx(L,{id:"urutan",type:"number",value:n.urutan,onChange:a=>H("urutan",a.target.value),placeholder:"1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"huruf_id",children:"Huruf"}),e.jsxs(V,{value:n.huruf_id,onValueChange:a=>H("huruf_id",a),disabled:C.open,children:[e.jsx(O,{children:e.jsx(R,{placeholder:"Pilih huruf"})}),e.jsx(U,{style:{maxHeight:300,overflowY:"auto",pointerEvents:"auto",background:"white"},children:u.map(a=>e.jsxs(D,{value:a.id.toString(),children:[a.huruf," (",a.romaji,")"]},a.id))})]})]})]}),e.jsxs($,{children:[e.jsx(s,{variant:"outline",onClick:()=>{v({open:!1}),f({open:!1,image:null}),w()},children:"Batal"}),e.jsx(s,{onClick:g.open?J:Q,children:g.open?"Tambah":"Simpan"})]})]})}),e.jsx(M,{open:o.open,onOpenChange:a=>I({open:a,image:null}),children:e.jsxs(P,{className:"max-w-md",children:[e.jsx(A,{children:e.jsx(E,{children:"Detail Gambar Huruf"})}),o.image&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx("img",{src:"/placeholder.svg?height=128&width=128",alt:"Preview",className:"w-24 h-24 object-cover rounded"})})}),e.jsxs("div",{children:[e.jsx(c,{className:"font-semibold",children:"Link:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-sm break-all",children:o.image.link}),e.jsx(s,{variant:"outline",size:"sm",onClick:()=>window.open(o.image.link,"_blank"),children:e.jsx(Y,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"font-semibold",children:"Urutan:"}),e.jsx("p",{children:o.image.urutan})]}),e.jsxs("div",{children:[e.jsx(c,{className:"font-semibold",children:"Huruf:"}),e.jsx("p",{children:q(o.image.huruf_id)})]})]})]})}),e.jsx(M,{open:z.open,onOpenChange:a=>j({open:a,image:null}),children:e.jsxs(P,{children:[e.jsxs(A,{children:[e.jsx(E,{children:"Konfirmasi Hapus"}),e.jsx(ue,{children:"Apakah Anda yakin ingin menghapus gambar huruf ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs($,{children:[e.jsx(s,{variant:"outline",onClick:()=>j({open:!1,image:null}),children:"Batal"}),e.jsx(s,{variant:"destructive",onClick:W,children:"Hapus"})]})]})})]})]})};export{Qe as default};
