import{j as e}from"./app-57e7bed0.js";import{X as ie,r as n,S as re,A as T}from"./vendor-a2d89f66.js";import{s as D}from"./index-1df17e58.js";import{C as le,a as oe,b as de,c as ce}from"./card-94e97b23.js";import{B as i}from"./button-b255e397.js";import{I as h}from"./input-77681c11.js";import{L as u}from"./label-acbb46eb.js";import{S as z,a as I,b as B,c as K,d as H}from"./select-084f9a0f.js";import{T as me,a as he,b as M,c as d,d as ue,e as l}from"./table-f62baeff.js";import{D as V,a as $,b as O,c as Y,d as q,e as xe}from"./dialog-08090aed.js";import{A as je}from"./AdminDashboardLayout-1ace00be.js";import{P as pe}from"./plus-424d13ac.js";import{S as fe}from"./search-d440357c.js";import{P as ge}from"./pause-2133a29a.js";import{P as Ce}from"./play-f8de0b3d.js";import{S as ve}from"./square-pen-be699300.js";import{T as Ne}from"./trash-2-ee5a2ec2.js";import{C as ke}from"./chevron-left-26830aa1.js";import{C as Se}from"./chevron-right-d74b2ff6.js";import"./dropdown-menu-d0862b52.js";import"./avatar-7ff8c940.js";import"./check-95999c31.js";import"./createLucideIcon-256efdfd.js";import"./chevron-down-a36c0fa8.js";import"./index-007e7e0b.js";import"./x-49dde499.js";import"./house-ebc95582.js";import"./users-1490e3f6.js";import"./book-open-5cdb0389.js";import"./circle-help-c62c54b0.js";const ea=()=>{var E;const{examples:F,availableLetters:b}=ie().props,[x,G]=n.useState(""),[j,U]=n.useState("0"),[o,c]=n.useState(1),[X,_]=n.useState(null),[J,L]=n.useState(!1),Q=n.useRef(null),[w,p]=n.useState({open:!1,example:null}),[y,f]=n.useState({open:!1,example:null}),[g,C]=n.useState({open:!1}),[s,P]=n.useState({kata:"",romaji:"",arti:"",huruf_id:"",audio:""}),v=5,N=n.useMemo(()=>F.filter(a=>{const t=a.kata.toLowerCase().includes(x.toLowerCase())||a.romaji.toLowerCase().includes(x.toLowerCase()),r=j==="0"||a.huruf_id.toString()===j;return t&&r}),[F,x,j]),A=Math.ceil(N.length/v),k=(o-1)*v,R=N.slice(k,k+v),W=(a,t)=>{if(!a)return;_(t),L(!0);const r=new Audio(a);Q.current=r,r.play().catch(ne=>console.error("Gagal memutar audio:",ne)),r.onended=()=>{L(!1),_(null)}},m=(a,t)=>{P(r=>({...r,[a]:t}))},S=()=>{P({kata:"",romaji:"",arti:"",huruf_id:"",audio:""})},Z=()=>{if(!s.kata||!s.romaji||!s.arti||!s.huruf_id){alert("Semua field wajib diisi!");return}T.post(D("admin.contoh-penggunaan.store"),s,{onSuccess:()=>{C({open:!1}),S()}})},ee=a=>{P({kata:a.kata,romaji:a.romaji,arti:a.arti,huruf_id:a.huruf_id,audio:a.audio||""}),f({open:!0,example:a})},ae=()=>{T.put(D("admin.contoh-penggunaan.update",y.example.id),s,{onSuccess:()=>{f({open:!1,example:null}),S()}})},se=()=>{T.delete(D("admin.contoh-penggunaan.destroy",w.example.id),{onSuccess:()=>{p({open:!1,example:null})}})},te=a=>{const t=b.find(r=>r.id===a);return t?`${t.huruf} (${t.romaji})`:`ID: ${a}`};return e.jsxs(je,{currentPage:"letter-examples",children:[e.jsx(re,{title:"Contoh Penggunaan Admin"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manajemen Contoh Penggunaan"}),e.jsxs(i,{onClick:()=>C({open:!0}),className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Tambah Contoh"]})]}),e.jsxs(le,{children:[e.jsx(oe,{children:e.jsx(de,{children:"Data Contoh Penggunaan"})}),e.jsxs(ce,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(h,{placeholder:"Cari kata/romaji...",value:x,onChange:a=>{G(a.target.value),c(1)},className:"pl-10"})]}),e.jsxs(z,{value:j,onValueChange:a=>{U(a),c(1)},children:[e.jsx(I,{className:"w-full md:w-48",children:e.jsx(B,{placeholder:"Filter Huruf"})}),e.jsxs(K,{style:{maxHeight:300,overflowY:"auto"},children:[e.jsx(H,{value:"0",children:"Semua Huruf"}),b.map(a=>e.jsxs(H,{value:a.id,children:[a.huruf," (",a.romaji,")"]},a.id))]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(me,{children:[e.jsx(he,{children:e.jsxs(M,{children:[e.jsx(d,{children:"Kata"}),e.jsx(d,{children:"Romaji"}),e.jsx(d,{children:"Arti"}),e.jsx(d,{children:"Huruf"}),e.jsx(d,{children:"Audio"}),e.jsx(d,{className:"text-center",children:"Action"})]})}),e.jsx(ue,{children:R.length>0?R.map(a=>e.jsxs(M,{children:[e.jsx(l,{children:a.kata}),e.jsx(l,{children:a.romaji}),e.jsx(l,{children:a.arti}),e.jsx(l,{children:te(a.huruf_id)}),e.jsx(l,{children:e.jsx(i,{variant:"outline",size:"sm",onClick:()=>W(a.audio,a.id),className:"h-8 w-8 p-0",children:X===a.id&&J?e.jsx(ge,{className:"h-4 w-4"}):e.jsx(Ce,{className:"h-4 w-4"})})}),e.jsxs(l,{className:"text-center",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>ee(a),className:"h-8 w-8 p-0",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>p({open:!0,example:a}),className:"h-8 w-8 p-0",children:e.jsx(Ne,{className:"h-4 w-4"})})]})]},a.id)):e.jsx(M,{children:e.jsx(l,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Tidak ada data ditemukan"})})})]})}),A>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Menampilkan ",k+1," - ",Math.min(k+v,N.length)," dari"," ",N.length," data"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>c(o-1),disabled:o===1,children:[e.jsx(ke,{className:"h-4 w-4"}),"Previous"]}),Array.from({length:A},(a,t)=>t+1).map(a=>e.jsx(i,{variant:o===a?"default":"outline",size:"sm",onClick:()=>c(a),className:"w-8 h-8 p-0",children:a},a)),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>c(o+1),disabled:o===A,children:["Next",e.jsx(Se,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(V,{open:g.open||y.open,onOpenChange:a=>{a||(C({open:!1}),f({open:!1,example:null}),S())},children:e.jsxs($,{className:"max-w-lg",children:[e.jsx(O,{children:e.jsx(Y,{children:g.open?"Tambah Contoh Penggunaan":"Edit Contoh Penggunaan"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"kata",children:"Kata"}),e.jsx(h,{id:"kata",value:s.kata,onChange:a=>m("kata",a.target.value),placeholder:"Kata"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"romaji",children:"Romaji"}),e.jsx(h,{id:"romaji",value:s.romaji,onChange:a=>m("romaji",a.target.value),placeholder:"Romaji"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"arti",children:"Arti"}),e.jsx(h,{id:"arti",value:s.arti,onChange:a=>m("arti",a.target.value),placeholder:"Arti"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"huruf_id",children:"Huruf"}),e.jsxs(z,{value:s.huruf_id,onValueChange:a=>m("huruf_id",a),disabled:y.open,children:[e.jsx(I,{children:e.jsx(B,{placeholder:"Pilih huruf"})}),e.jsx(K,{style:{maxHeight:300,overflowY:"auto"},children:b.map(a=>e.jsxs(H,{value:a.id,children:[a.huruf," (",a.romaji,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"audio",children:"Audio URL"}),e.jsx(h,{id:"audio",value:s.audio,onChange:a=>m("audio",a.target.value),placeholder:"https://example.com/audio.mp3"})]})]}),e.jsxs(q,{children:[e.jsx(i,{variant:"outline",onClick:()=>{C({open:!1}),f({open:!1,example:null}),S()},children:"Batal"}),e.jsx(i,{onClick:g.open?Z:ae,children:g.open?"Tambah":"Simpan"})]})]})}),e.jsx(V,{open:w.open,onOpenChange:a=>p({open:a,example:null}),children:e.jsxs($,{children:[e.jsxs(O,{children:[e.jsx(Y,{children:"Konfirmasi Hapus"}),e.jsxs(xe,{children:['Apakah Anda yakin ingin menghapus contoh penggunaan "',(E=w.example)==null?void 0:E.kata,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(q,{children:[e.jsx(i,{variant:"outline",onClick:()=>p({open:!1,example:null}),children:"Batal"}),e.jsx(i,{variant:"destructive",onClick:se,children:"Hapus"})]})]})})]})]})};export{ea as default};
